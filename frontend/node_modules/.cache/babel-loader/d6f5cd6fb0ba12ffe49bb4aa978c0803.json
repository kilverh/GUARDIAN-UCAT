{"ast":null,"code":"var _jsxFileName = \"/Users/kilverthestebanclarosordonez/Downloads/GUARDIAN-UCAT/frontend/src/page/IncidentHistory.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom'; // Cambia a useNavigate\nimport '/Users/kilverthestebanclarosordonez/Downloads/GUARDIAN-UCAT/frontend/src/styles/IncidentHistory.css'; // Importa el archivo de estilos\n\nconst IncidentHistory = () => {\n  const navigate = useNavigate(); // Usa useNavigate en lugar de useHistory\n  const [incidents, setIncidents] = useState([]);\n  useEffect(() => {\n    const fetchIncidents = async () => {\n      try {\n        const response = await fetch('http://localhost:5001/api/reports', {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}` // Asegúrate de incluir el token\n          }\n        });\n        const data = await response.json();\n        setIncidents(data);\n      } catch (error) {\n        console.error('Error fetching incidents:', error);\n      }\n    };\n    fetchIncidents();\n  }, []);\n  const handleDelete = async id => {\n    try {\n      const response = await fetch(`http://localhost:5001/api/reports/${id}`, {\n        method: 'DELETE',\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}` // Incluir el token\n        }\n      });\n      if (response.ok) {\n        // Actualiza la lista de incidentes después de eliminar uno\n        setIncidents(incidents.filter(incident => incident.id !== id));\n        alert('Incidente eliminado exitosamente.');\n      } else {\n        alert('Error al eliminar el incidente.');\n      }\n    } catch (error) {\n      console.error('Error deleting incident:', error);\n      alert('Error al eliminar el incidente.');\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"incident-history-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }, \"Historial de Incidentes\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"incident-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }, incidents.length > 0 ? incidents.map(incident => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"incident-item\",\n    key: incident.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"incident-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 29\n    }\n  }, incident.description), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"incident-category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 29\n    }\n  }, \"Categor\\xEDa: \", incident.category), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"incident-location\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 29\n    }\n  }, \"Ubicaci\\xF3n: \", incident.location), incident.evidence_link && /*#__PURE__*/React.createElement(\"a\", {\n    href: incident.evidence_link,\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    className: \"evidence-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 33\n    }\n  }, \"Ver Evidencia\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"delete-button\",\n    onClick: () => handleDelete(incident.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 29\n    }\n  }, \"Eliminar\"))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 21\n    }\n  }, \"No hay incidentes reportados.\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"back-button\",\n    onClick: () => navigate('/menu'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, \"Volver al Men\\xFA Principal\"));\n};\nexport default IncidentHistory;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","IncidentHistory","navigate","incidents","setIncidents","fetchIncidents","response","fetch","headers","Authorization","localStorage","getItem","data","json","error","console","handleDelete","id","method","ok","filter","incident","alert","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","length","map","key","description","category","location","evidence_link","href","target","rel","onClick"],"sources":["/Users/kilverthestebanclarosordonez/Downloads/GUARDIAN-UCAT/frontend/src/page/IncidentHistory.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom'; // Cambia a useNavigate\nimport '/Users/kilverthestebanclarosordonez/Downloads/GUARDIAN-UCAT/frontend/src/styles/IncidentHistory.css'; // Importa el archivo de estilos\n\nconst IncidentHistory = () => {\n    const navigate = useNavigate(); // Usa useNavigate en lugar de useHistory\n    const [incidents, setIncidents] = useState([]);\n\n    useEffect(() => {\n        const fetchIncidents = async () => {\n            try {\n                const response = await fetch('http://localhost:5001/api/reports', {\n                    headers: {\n                        Authorization: `Bearer ${localStorage.getItem('token')}` // Asegúrate de incluir el token\n                    }\n                });\n                const data = await response.json();\n                setIncidents(data);\n            } catch (error) {\n                console.error('Error fetching incidents:', error);\n            }\n        };\n\n        fetchIncidents();\n    }, []);\n\n    const handleDelete = async (id) => {\n        try {\n            const response = await fetch(`http://localhost:5001/api/reports/${id}`, {\n                method: 'DELETE',\n                headers: {\n                    Authorization: `Bearer ${localStorage.getItem('token')}` // Incluir el token\n                }\n            });\n            if (response.ok) {\n                // Actualiza la lista de incidentes después de eliminar uno\n                setIncidents(incidents.filter((incident) => incident.id !== id));\n                alert('Incidente eliminado exitosamente.');\n            } else {\n                alert('Error al eliminar el incidente.');\n            }\n        } catch (error) {\n            console.error('Error deleting incident:', error);\n            alert('Error al eliminar el incidente.');\n        }\n    };\n\n    return (\n        <div className=\"incident-history-container\">\n            <h2 className=\"title\">Historial de Incidentes</h2>\n            <div className=\"incident-list\">\n                {incidents.length > 0 ? (\n                    incidents.map((incident) => (\n                        <div className=\"incident-item\" key={incident.id}>\n                            <h3 className=\"incident-description\">{incident.description}</h3>\n                            <p className=\"incident-category\">Categoría: {incident.category}</p>\n                            <p className=\"incident-location\">Ubicación: {incident.location}</p>\n                            {incident.evidence_link && (\n                                <a href={incident.evidence_link} target=\"_blank\" rel=\"noopener noreferrer\" className=\"evidence-link\">\n                                    Ver Evidencia\n                                </a>\n                            )}\n                            <button className=\"delete-button\" onClick={() => handleDelete(incident.id)}>\n                                Eliminar\n                            </button>\n                        </div>\n                    ))\n                ) : (\n                    <p>No hay incidentes reportados.</p>\n                )}\n            </div>\n            <button className=\"back-button\" onClick={() => navigate('/menu')}>\n                Volver al Menú Principal\n            </button>\n        </div>\n    );\n};\n\nexport default IncidentHistory;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}